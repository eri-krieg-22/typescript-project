<!DOCTYPE html>
<html lang="de">
<head>
    <title>Typescript Projekt</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
    <button type="button" id="button" onclick="askWeather()">Wie viel Grad hat es?</button>
    <p id="status"></p>
    <p id="temperatur"></p>
    <script>
        const status = document.querySelector("#status");
        const temperatur = document.querySelector("#temperatur");
        function askWeather() {

            if (!navigator.geolocation) {
                status.textContent = "Geolocation nicht unterstÃ¼tzt";
            } else {
                status.textContent = "Suche...";
                navigator.geolocation.getCurrentPosition(success, error);
            }
            function success(position) {
                const latitude = position.coords.latitude;
                const longitude = position.coords.longitude;
                const xhr = new XMLHttpRequest();
                xhr.open("GET", "https://api.open-meteo.com/v1/forecast?latitude=" + latitude + "&longitude=" + longitude + "&current_weather=true");
                xhr.send();
                xhr.responseType = "json";
                xhr.onload = () => {
                    if (xhr.readyState === 4 && xhr.status === 200) {
                        const data = xhr.response;
                        console.log(data);
                        temperatur.textContent = data.current_weather.temperature + " Grad Celcius";
                    } else {
                        console.log(`Error: ${xhr.status}`);
                    }
                };
            }
            function error() {
                status.textContent = "Position nicht auffindbar";
            }
            }
    </script>
</body>
</html>
